(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{241:(e,t,n)=>{Promise.resolve().then(n.t.bind(n,2619,23)),Promise.resolve().then(n.t.bind(n,1356,23)),Promise.resolve().then(n.t.bind(n,1402,23)),Promise.resolve().then(n.t.bind(n,4735,23)),Promise.resolve().then(n.bind(n,1170)),Promise.resolve().then(n.bind(n,7754)),Promise.resolve().then(n.bind(n,1852)),Promise.resolve().then(n.t.bind(n,3673,23)),Promise.resolve().then(n.bind(n,6361)),Promise.resolve().then(n.bind(n,6620)),Promise.resolve().then(n.bind(n,5409))},331:(e,t,n)=>{"use strict";n.d(t,{F:()=>o});var a=n(27),r=n(7235);let o=async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=await (0,r.A)({preview:t,queryParams:e,url:"/api/entries"});return{...n,items:(0,a.A)(n)}}},1170:(e,t,n)=>{"use strict";n.d(t,{default:()=>d});var a=n(5155),r=n(5239),o=n(2619),i=n.n(o),c=n(63),s=n(2115),l=n(6620);function d(){let{clearHomePosts:e}=(0,l.j)(),[t,n]=(0,s.useState)(!1),[o,d]=(0,s.useState)(!1),[u,h]=(0,s.useState)(""),[p,v]=(0,s.useState)(!1),[m,g]=(0,s.useState)(!1),f=(0,s.useRef)(null),y=(0,s.useRef)(null),b=(0,c.useRouter)(),x=(0,c.usePathname)(),w=(0,c.useSearchParams)(),T=w.get("s"),j="/"===x&&null===T&&null===w.get("p"),E=()=>{n(!t)},k=()=>{d(!1)},P=()=>{k(),e()};return(0,s.useEffect)(()=>{var e,n;if(t){null==(n=f.current)||n.focus();return}null==(e=f.current)||e.blur()},[t]),(0,s.useEffect)(()=>{if(!j)return;let e=()=>{let e=document.getElementById("home-banner");if(e){var t;let n=e.clientHeight-((null==y||null==(t=y.current)?void 0:t.clientHeight)||0)-40,{scrollY:a}=window;a>=50?g(!0):g(!1),a>n?v(!0):v(!1)}else v(!1)};return window.addEventListener("scroll",e),e(),()=>{window.removeEventListener("scroll",e)}},[j]),(0,s.useEffect)(()=>{let e=e=>{let a=e.target;t&&"search-icon"!==a.id&&"search-input"!==a.id&&n(!1)};return t&&window.addEventListener("click",e),()=>{window.removeEventListener("click",e)}},[t]),(0,s.useEffect)(()=>{let e=e=>{(e.metaKey||e.ctrlKey)&&"/"===e.key&&(e.preventDefault(),n(e=>!e))};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[]),(0,a.jsx)("header",{className:"header ".concat(j&&!p?m&&"blur"||"transparent":""," ").concat("/about"===x?"about":""),children:(0,a.jsxs)("section",{className:"container",ref:y,children:[(0,a.jsxs)("div",{className:"container-left",children:[(0,a.jsx)(i(),{href:"/",onClick:P,children:(0,a.jsx)(r.default,{src:"/images/logo.png",alt:"Engineering logo",width:90,height:36,priority:!0,quality:100})}),(0,a.jsx)("nav",{className:"nav ".concat(o?"open":""),children:(0,a.jsxs)("ul",{children:[(0,a.jsx)("li",{className:j?"active":"",children:(0,a.jsx)(i(),{href:"/",onClick:P,children:"Blog"})}),(0,a.jsx)("li",{className:"/podcasts"===x?"active":"",children:(0,a.jsx)(i(),{href:"/podcasts",onClick:k,children:"Podcasts"})}),(0,a.jsx)("li",{className:"/opensource"===x?"active":"",children:(0,a.jsx)(i(),{href:"/opensource",onClick:k,children:"Open Source"})}),(0,a.jsx)("li",{className:"/jobs"===x?"active":"",children:(0,a.jsx)(i(),{href:"/jobs",onClick:k,children:"Jobs"})}),(0,a.jsx)("li",{className:"/about"===x?"active":"",children:(0,a.jsx)(i(),{href:"/about",onClick:k,children:"About"})})]})})]}),(0,a.jsx)("div",{className:"container-right",children:(0,a.jsxs)("div",{className:"search ".concat(t?"open":""),children:[(0,a.jsx)("div",{className:"search__input",children:(0,a.jsx)("input",{type:"text",value:u,ref:f,onChange:e=>{h(e.target.value)},onKeyDown:t=>{"Enter"===t.key&&(b.push("/?s=".concat(encodeURIComponent(u.trim()))),e(),E())},id:"search-input",placeholder:"Search"})}),(0,a.jsxs)("div",{className:"search__icon",children:[(0,a.jsx)(r.default,{src:"/images/icon-search.svg",width:24,height:24,alt:"Search",className:"mag",id:"search-icon",onClick:E}),(0,a.jsx)(r.default,{src:"/images/icon-close.svg",width:24,height:24,alt:"Search",className:"close",onClick:E})]}),(0,a.jsxs)("div",{className:"menu-button ".concat(o?"open":""),onClick:()=>{d(!o)},children:[(0,a.jsx)("span",{}),(0,a.jsx)("span",{}),(0,a.jsx)("span",{})]})]})})]})})}},1852:(e,t,n)=>{"use strict";n.d(t,{default:()=>l});var a=n(5155),r=n(2115),o=n(63),i=n(2999),c=n(7235),s=n(3893);function l(){let e=(0,o.useSearchParams)(),[t,n]=(0,r.useState)(null);return(0,r.useEffect)(()=>{let t=localStorage.getItem(i.HO),a=!t||Math.abs(new Date().getTime()-new Date(t).getTime())/864e5>2,r=async()=>{var t;let a=e.get("preview"),r=await (0,c.A)({queryParams:{content_type:"appBanner",preview:"true"===a},url:"/api/entries"});(null==r||null==(t=r.items)?void 0:t.length)&&n(r.items[0].fields)};a&&r()},[e]),(0,a.jsx)("div",{className:"notification",children:(0,a.jsx)("div",{className:"content",children:t?(0,a.jsx)("div",{className:"left",dangerouslySetInnerHTML:{__html:(0,s.F)(t.content)}}):null})})}},2999:(e,t,n)=>{"use strict";n.d(t,{HO:()=>r,T_:()=>o,VT:()=>a,Vi:()=>i});let a="https://engineering.atspotify.com",r="showBanner",o=110,i={aboutTagline:{content:[{content:[{data:{},marks:[],nodeType:"text",value:"Spotify Engineering is a diverse community of engineers, developers, researchers and more. Together, we build the infrastructure, features, and experiences you love – and help to shape the future of audio."}],data:{},nodeType:"heading-4"},{content:[{data:{},marks:[],nodeType:"text",value:""}],data:{},nodeType:"paragraph"}],data:{},nodeType:"document"},homepageBannerText:{content:[{content:[{data:{},marks:[],nodeType:"text",value:"Read about the magic behind the music & more. Welcome to our official technology blog."}],data:{},nodeType:"heading-4"},{content:[{data:{},marks:[],nodeType:"text",value:""}],data:{},nodeType:"paragraph"}],data:{},nodeType:"document"},jobsTagline:{content:[{content:[{data:{},marks:[],nodeType:"text",value:"Complex problems, exceptional colleagues, and a direct impact on the joy of 696 million people. Our beliefs drive our success."}],data:{},nodeType:"heading-4"},{content:[{data:{},marks:[],nodeType:"text",value:""}],data:{},nodeType:"paragraph"}],data:{},nodeType:"document"},opensourceTagline:{content:[{content:[{data:{},marks:[],nodeType:"text",value:"There’s never been a better time to take part in open source at Spotify. We don’t just want to contribute back to the community — we want to lead the way with projects we truly believe in. Jump into one of the projects below and join us."}],data:{},nodeType:"heading-4"},{content:[{data:{},marks:[],nodeType:"text",value:""}],data:{},nodeType:"paragraph"}],data:{},nodeType:"document"},podcastTagline:{content:[{content:[{data:{},marks:[],nodeType:"text",value:"Two original shows from Spotify R&D.\nListen and fill your brain with great tech stories."}],data:{},nodeType:"heading-4"},{content:[{data:{},marks:[],nodeType:"text",value:""}],data:{},nodeType:"paragraph"}],data:{},nodeType:"document"}}},3673:()=>{},3893:(e,t,n)=>{"use strict";n.d(t,{F:()=>c});var a=n(8422),r=n(7191),o=n(7897);let i={renderNode:{[r.nA.EMBEDDED_ASSET]:e=>{let{description:t,file:n,title:a}=e.data.target.fields||{};return'\n      <figure class="figure-image">\n        <img \n          src="'.concat(null==n?void 0:n.url,'" \n          style="width: 100%; max-width: 100%; height: auto;"\n          class="blog-image"\n          alt="').concat(a,'"\n        />\n        ').concat(t?'<figcaption class="caption">'.concat(t,"</figcaption>"):"","\n      </figure>\n      ")},[r.nA.EMBEDDED_ENTRY]:e=>{var t;let{asset:n,caption:r,hyperlink:o,raw_html:i,title:c,width:s}=e.data.target.fields||{},{file:l}=(null==n?void 0:n.fields)||{},{width:d}=(null==l||null==(t=l.details)?void 0:t.image)||{},u=null==l?void 0:l.url.includes("videos.ctfassets");if(null==l?void 0:l.url.endsWith(".mp3"))return'\n        <figure class="figure-audio">\n          <audio controls src="'.concat(null==l?void 0:l.url,'"></audio>\n          ').concat(r?'<figcaption class="caption">'.concat((0,a.v)(r),"</figcaption>"):"","\n        </figure>\n        ");if(u)return'\n        <figure class="figure-video">\n          <video controls>\n            <source src="'.concat(null==l?void 0:l.url,'" type="video/mp4" />\n            Your browser does not support the video tag.\n          </video>\n          ').concat(r?'<figcaption class="caption">'.concat((0,a.v)(r),"</figcaption>"):"","\n        </figure>\n        ");if(i&&i.includes("iframe"))return i;let h=i?i.match(/<img[^>]*style=["']([^"']*)["']/i):null,p='\n      <img \n          src="'.concat(null==l?void 0:l.url,'" \n          style="width: ').concat((s&&"None"!==s&&d?d!==s:null)?"".concat(s,"px"):"100%","; max-width: 100%; height: auto; ").concat(h?h[1]:"",'"\n          class="blog-image"\n          alt="').concat(c,'"\n        />\n      ');return'\n      <figure class="figure-image">\n        '.concat(o?'\n              <a href="'.concat(o,'" target="_blank" rel="noopener noreferrer">\n                ').concat(p,"\n              </a>\n              "):p,"\n        ").concat(r?'<figcaption class="caption">'.concat((0,a.v)(r),"</figcaption>"):"","\n      </figure>\n      ")},[r.nA.PARAGRAPH]:(e,t)=>{var n;let a=t(e.content);if(e.content.some(e=>{var t;return null==(t=e.marks)?void 0:t.some(e=>e.type===r.j7.SUPERSCRIPT)}))return'<p class="super-script">'.concat(a,"</p>");if(e.content.every(e=>{var t;return null==(t=e.marks)?void 0:t.some(e=>e.type===r.j7.CODE)}))return"<pre><code>".concat(a,"</code></pre>");let o=null==a?void 0:a.trim(),i=o.includes("<img");return((null==o||null==(n=o.startsWith)?void 0:n.call(o,"<a"))||(null==o?void 0:o.startsWith("<img")))&&i?'<p class="image-paragraph">'.concat(a,"</p>"):/Table \d+:/.test(o)?'<p class="caption">'.concat(a,"</p>"):"<p ".concat(i?'class="inline-image-paragraph"':"",">").concat(a,"</p>")},[r.nA.TABLE]:(e,t)=>{let n=t(e.content);return n.includes("<img")?'\n        <div class="image-table-container">\n          <table class="image-table">'.concat(n,"</table>\n        </div>\n        "):'\n      <div class="table-container">\n        <table >'.concat(n,"</table>\n      </div>\n      ")},[r.XD.EMBEDDED_ENTRY]:e=>{let{data:{target:{fields:t,sys:n}}}=e,{asset:r,caption:i,html:c,hyperlink:s,slug:l,title:d,width:u}=t||{};if(c)return c;if(r){let{file:e,title:t}=(null==r?void 0:r.fields)||{},n=u&&"None"!==u&&parseInt(u,10)||null,o='\n          <img \n          src="'.concat(null==e?void 0:e.url,'" \n          alt="').concat(t,'"\n          class="inline-image"\n          style="width: ').concat(n?"".concat(n,"px"):"100%",'; height: auto;"\n          />\n        ');return s?'\n            <a \n              href="'.concat(s,'" \n              target="_blank" \n              rel="noopener noreferrer"\n              class="inline-image-link"\n            >\n              ').concat(o,"\n            </a>\n            ").concat(i?'<figcaption class="caption">'.concat((0,a.v)(i),"</figcaption>"):"","\n          "):"\n          ".concat(o,"\n          ").concat(i?'<figcaption class="caption">'.concat((0,a.v)(i),"</figcaption>"):"","\n        ")}if(d)return'\n          <a\n            href="'.concat((0,o.dg)({fields:{slug:l},sys:n}),'"\n            target="_blank"\n            rel="noopener noreferrer"\n          >\n            ').concat(d,"\n          </a>\n        ")},[r.XD.HYPERLINK]:(e,t)=>{let{data:n}=e,{uri:a}=n,r=t(e.content);return'<a href="'.concat(a,'" target="_blank" rel="noopener noreferrer">').concat(r,"</a>")}}},c=e=>(0,a.v)(e,i)},4735:()=>{},5409:(e,t,n)=>{"use strict";n.d(t,{UiTextProvider:()=>l});var a=n(5155),r=n(2115),o=n(2999),i=n(331);let c=async()=>{var e;let{items:t,success:n}=await (0,i.F)({content_type:"textLabels",limit:1});return n&&t.length&&(null==(e=t[0])?void 0:e.fields)?t[0].fields:o.Vi},s=(0,r.createContext)({loading:!1,refetch:()=>{},uiTexts:{}}),l=e=>{let{children:t,defaultUiText:n}=e,[i,l]=(0,r.useState)(n||o.Vi),[d,u]=(0,r.useState)(!0),h=async()=>{u(!0),l(await c()),u(!1)},p=(0,r.useMemo)(()=>({loading:d,refetch:h,uiTexts:i}),[i,d]);return(0,r.useEffect)(()=>{h()},[]),(0,a.jsx)(s.Provider,{value:p,children:t})}},6361:(e,t,n)=>{"use strict";n.d(t,{HeaderContextProvider:()=>i,u:()=>c});var a=n(5155),r=n(2115);let o=(0,r.createContext)(void 0),i=e=>{let{children:t}=e,[n,i]=(0,r.useState)(!1),c=(0,r.useMemo)(()=>({setShowBanner:i,showBanner:n}),[n]);return(0,a.jsx)(o.Provider,{value:c,children:t})},c=()=>{let e=(0,r.useContext)(o);if(!e)throw Error("useHeaderContext must be used within a HeaderProvider");return e}},6620:(e,t,n)=>{"use strict";n.d(t,{PostProvider:()=>i,j:()=>c});var a=n(5155),r=n(2115);let o=(0,r.createContext)(void 0),i=e=>{let{children:t}=e,[n,i]=(0,r.useState)([]),[c,s]=(0,r.useState)([]),[l,d]=(0,r.useState)([]),u=(0,r.useMemo)(()=>({categoryPosts:l,clearCategoryPosts:()=>{d([])},clearHomePosts:()=>{i([])},clearTagPosts:()=>{s([])},homePosts:n,setCategoryPosts:d,setHomePosts:i,setTagPosts:s,tagPosts:c}),[l,n,d,i,s,c]);return(0,a.jsx)(o.Provider,{value:u,children:t})},c=()=>{let e=(0,r.useContext)(o);if(!e)throw Error("usePosts must be used within a PostProvider");return e}},7235:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var a=n(5704);let r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.entries(e).reduce((e,t,n)=>{let[a,r]=t;return"".concat(e).concat(n>0?"&":"?").concat(a,"=").concat(r)},"")},o=async e=>{let{hideToken:t,options:n,preview:o=!1,queryParams:i={},url:c}=e,s=(o?a.env.PREVIEW_TOKEN:a.env.ACCESS_TOKEN)||"",l="".concat(c).concat(r(s&&!t?{...i,access_token:s}:i)),d=(null==n?void 0:n.body)instanceof FormData;try{let e={method:"GET",...n,body:d?null==n?void 0:n.body:JSON.stringify(null==n?void 0:n.body),headers:{...d?{}:{"Content-Type":"application/json"},...(null==n?void 0:n.headers)||{}}},t=await fetch(l,{...e,credentials:"include"}),a=await t.json();if(t.status>=400)throw Error(JSON.stringify(a,void 0,2)||"API request failed");return{...a,success:!0}}catch(e){return{success:!1}}}},7754:(e,t,n)=>{"use strict";n.d(t,{Initializer:()=>c});var a=n(5155),r=n(2691),o=n(2115);n(6011);var i=n(6361);let c=e=>{let{children:t}=e,{showBanner:n}=(0,i.u)();return(0,o.useEffect)(()=>{let e=new r.A({autoRaf:!0});return()=>{e.destroy()}},[]),(0,a.jsx)("div",{className:"content-wrapper ".concat(n?"show-notification":""),children:t})}},7897:(e,t,n)=>{"use strict";n.d(t,{C$:()=>i,E8:()=>o,R3:()=>c,dg:()=>r});var a=n(2999);let r=e=>{let{created_at:t,slug:n}=e.fields,a=new Date(t||e.sys.createdAt);return"/".concat(a.getFullYear(),"/").concat(a.getMonth()+1,"/").concat(n)},o=e=>"Published by ".concat(e),i=(e,t)=>{if(e)return e;if(!t||!t.content)return"";let n=t.content.find(e=>"paragraph"===e.nodeType);if(!n||!n.content)return"";let r=n.content.filter(e=>"text"===e.nodeType).map(e=>e.value).join("");if(r.length<=a.T_)return r;let o=r.slice(0,a.T_).lastIndexOf(" "),i=o>0?o:a.T_;return"".concat(r.slice(0,i).trim(),"...")},c=e=>{let{fields:t}=e;return!!(null==t?void 0:t.categories)&&(t.categories||[]).some(e=>{var t;return(null==e||null==(t=e.fields)?void 0:t.slug)==="my-beat"})}}},e=>{e.O(0,[140,619,356,442,237,45,441,255,358],()=>e(e.s=241)),_N_E=e.O()}]);